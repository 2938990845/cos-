<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆå›¾ç‰‡æ›¿æ¢å·¥å…·</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 14px;
        }
        
        .content {
            padding: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input[type="text"],
        input[type="file"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }
        
        input[type="text"]:focus {
            border-color: #3498db;
            outline: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            width: 100%;
            transition: transform 0.2s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .preview {
            margin-top: 30px;
            text-align: center;
        }
        
        .preview img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 3px solid #fff;
        }
        
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #f8f9fa;
            border-left: 4px solid #3498db;
        }
        
        .status.success {
            border-left-color: #27ae60;
            background: #e8f5e8;
        }
        
        .status.error {
            border-left-color: #e74c3c;
            background: #fee;
        }
        
        .config-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 12px;
            color: #666;
        }
        
        .config-info h3 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .url-example {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
    </style>
    <!-- å¼•å…¥è…¾è®¯äº‘COS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/cos-js-sdk-v5/dist/cos-js-sdk-v5.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ® æ¸¸æˆå›¾ç‰‡æ›¿æ¢å·¥å…·</h1>
            <p>å®‰å…¨æ›¿æ¢æ¸¸æˆå†…å›¾ç‰‡å†…å®¹ - ä»…ä¾›æŠ€æœ¯ç ”ç©¶ä½¿ç”¨</p>
        </div>
        
        <div class="content">
            <div class="config-info">
                <h3>ğŸ“‹ å½“å‰é…ç½®ä¿¡æ¯</h3>
                <p>å­˜å‚¨æ¡¶: sgame-data-service-1252931805</p>
                <p>åœ°åŸŸ: ap-nanjing</p>
                <p>ç›®æ ‡åŸŸå: download.nature.qq.com</p>
            </div>
            
            <div class="form-group">
                <label for="imageUrl">ğŸ–¼ï¸ æ¸¸æˆå›¾ç‰‡URLåœ°å€</label>
                <input type="text" id="imageUrl" placeholder="è¯·è¾“å…¥æ¸¸æˆå†…å›¾ç‰‡URLï¼Œä¾‹å¦‚: https://download.nature.qq.com/SnsShare/SocialProfile/xxx/xxx.jpg">
                <div class="url-example">ç¤ºä¾‹: https://download.nature.qq.com/SnsShare/SocialProfile/5E71D72F5EFF3419C972328DBD36E568/175791409.jpg</div>
            </div>
            
            <div class="form-group">
                <label for="localImage">ğŸ“ é€‰æ‹©æœ¬åœ°æ›¿æ¢å›¾ç‰‡</label>
                <input type="file" id="localImage" accept="image/*">
            </div>
            
            <button class="btn" onclick="uploadImage()">ğŸš€ å¼€å§‹ä¸Šä¼ æ›¿æ¢</button>
            
            <div class="preview" id="previewSection" style="display: none;">
                <h3>å›¾ç‰‡é¢„è§ˆ</h3>
                <img id="previewImage" src="" alt="é¢„è§ˆå›¾">
            </div>
            
            <div ç­çº§="çŠ¶æ€" èº«ä»½æ ‡è¯†="StatusMessage" é£æ ¼="æ˜¾ç¤º: æ²¡æœ‰ä¸€ä¸ª;"></div>
        </div>
    </div>

    <è„šæœ¬>
//é…ç½®ä¿¡æ¯-ä¸pythonè„šæœ¬ä¿æŒä¸€è‡´
Consté…ç½®={
secretIdï¼šâ€˜AKIDNZbQ2Sfy5D9rM073nLhstiQzMWUHyUpI'ï¼Œ
secretKeyï¼š'OaYL1Yu3qY3JAyd6OceRzMbcrukNcdR5'ï¼Œ
åœ°åŒº: â€œå—äº¬â€,
æ¡¶: 'æ¸¸æˆæ•°æ®æœåŠ¡-1252931805',
targetDomainï¼š'download.nature.qq.com'
};

//åˆå§‹åŒ–COSå®¢æˆ·ç«¯
Const Cos=æ–°çš„Cos({
SecretIdï¼šé…ç½®.secretIdï¼Œ
secretKeyï¼šé…ç½®.secretKey
});

è®©selectedFile=æ— æ•ˆçš„ï¼›

// é¢„è§ˆé€‰ä¸­çš„å›¾ç‰‡
æ–‡ä»¶.getElementById('localImage').addEventListener('æ›´æ”¹'ï¼ŒåŠŸèƒ½(e){
Constæ–‡ä»¶=e.ç›®æ ‡.æ–‡ä»¶[0]ï¼›
å¦‚æœ (æ–‡ä»¶) {
selectedFile=æ–‡ä»¶ï¼›
Constè¯»è€…=æ–°çš„FileReader()ï¼›
è¯»è€….onload=åŠŸèƒ½(e){
Const previewSection=æ–‡ä»¶.getElementById('previewSection')ï¼›
Const previewImage=æ–‡ä»¶.getElementById('é¢„è§ˆå›¾åƒ')ï¼›
                    
previewImage.src=eã€‚ç›®æ ‡.ç»“æœï¼›
previewSection.é£æ ¼.æ˜¾ç¤º='å—'ï¼›
};
è¯»è€….readAsDataURL(æ–‡ä»¶)ï¼›
}
});

// ä¸Šä¼ å›¾ç‰‡å‡½æ•°
åŠŸèƒ½uploadImage(){
å¸¸é‡imageUrl=æ–‡ä»¶.getElementById('imageUrl')ã€‚ä»·å€¼.ä¿®å‰ª()ï¼›
Const StatusMessage=æ–‡ä»¶.getElementById('StatusMessage')ï¼›
            
// éªŒè¯è¾“å…¥
å¦‚æœ(ï¼imageUrl){
showStatus('è¯·è¾“å…¥æ¸¸æˆå›¾ç‰‡URLåœ°å€'ï¼Œ'é”™è¯¯')ï¼›
è¿”å›;
}
            
å¦‚æœ(ï¼selectedFile){
showStatus('è¯·é€‰æ‹©è¦ä¸Šä¼ çš„æœ¬åœ°å›¾ç‰‡'ï¼Œ'é”™è¯¯')ï¼›
è¿”å›;
}
            
å¦‚æœ(ï¼imageUrl.åŒ…æ‹¬(é…ç½®.targetDomain)||ï¼imageUrlã€‚åŒ…æ‹¬('SnShare/SocialProfile')){
showStatus('URLæ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·ç¡®è®¤æ˜¯æ¸¸æˆå†…å›¾ç‰‡é“¾æ¥'ï¼Œ'é”™è¯¯')ï¼›
è¿”å›;
}
            
showStatus('å¼€å§‹å¤„ç†ä¸Šä¼ ...'ï¼Œâ€)ï¼›
            
å°è¯• {
//æå–Cosé”®(è·¯å¾„)
Consté’¥åŒ™=extractCosKey(imageUrl)ï¼›
æ§åˆ¶å°.æ—¥å¿—('æå–çš„Cosé”®ï¼š'ï¼Œé’¥åŒ™)ï¼›
                
// æ˜¾ç¤ºå¤„ç†çŠ¶æ€
showStatus(â€˜æ­£åœ¨ä¸Šä¼ å›¾ç‰‡åˆ°COSè·¯å¾„ï¼š${é’¥åŒ™}â€˜ï¼Œâ€)ï¼›
                
//ä½¿ç”¨Cos SDKä¸Šä¼ æ–‡ä»¶
Cos.putObject({
æ¡¶: é…ç½®.æ¡¶,
åœ°åŒº: é…ç½®.åœ°åŒº,
é’¥åŒ™: é’¥åŒ™,
èº«ä½“ï¼šselectedFileï¼Œ
ONPROGRESSï¼šåŠŸèƒ½(progressData){
Constç™¾åˆ†æ¯”=æ•°å­¦.åœ†çš„(progressData.ç™¾åˆ†æ¯”*100)ï¼›
showStatus(â€˜ä¸Šä¼ è¿›åº¦ï¼š${ç™¾åˆ†æ¯”}%â€˜ï¼Œâ€)ï¼›
}
}, åŠŸèƒ½(çŠ¯é”™, æ•°æ®) {
å¦‚æœ (çŠ¯é”™) {
æ§åˆ¶å°.è¯¯å·®('ä¸Šä¼ å¤±è´¥:', çŠ¯é”™);
showStatus('ä¸Šä¼ å¤±è´¥ï¼š'+çŠ¯é”™.æ¶ˆæ¯ï¼Œ'é”™è¯¯')ï¼›
} å…¶ä»– {
æ§åˆ¶å°.æ—¥å¿—('ä¸Šä¼ æˆåŠŸ:', æ•°æ®);
                        
Const gameUrl=imageUrlï¼›
å¸¸æ•°cosUrl='https://${config.æ¡¶}ã€‚Cos.${config.åœ°åŒº}ã€‚myqcloud.com/${key}'ï¼›
                        
å¸¸æ•°successMessage='
âœ…  ä¸Šä¼ æˆåŠŸï¼
                            <æº´><æº´>
                            <å¼ºå¤§çš„>æ¸¸æˆå†…ç›¸å†Œé“¾æ¥:</å¼ºå¤§çš„><æº´>
                            <ä¸€ä¸ª href="${gameUrl}" ç›®æ ‡="_ç©ºç™½" é£æ ¼="æ–­å­—ç¬¦: æ‰“ç ´ä¸€åˆ‡;">${gameUrl}</ä¸€ä¸ª>
                            <æº´><æº´>
                            <å¼ºå¤§çš„>å­˜å‚¨æ¡¶å®æ—¶é“¾æ¥:</å¼ºå¤§çš„><æº´>
                            <ä¸€ä¸ª href="${cosUrl}" ç›®æ ‡="_ç©ºç™½" é£æ ¼="æ–­å­—ç¬¦: æ‰“ç ´ä¸€åˆ‡;">${cosUrl}</ä¸€ä¸ª>
                            <æº´><æº´>
ğŸ“  æç¤ºï¼šå¦‚æœå·²æœ‰è®¿é—®è¿‡ç›¸å†Œå›¾ç‰‡ï¼Œç¬¬äºŒæ¬¡ä¸Šä¼ å¯èƒ½å­˜åœ¨ç¼“å­˜ï¼Œå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´åç”Ÿæ•ˆ
`;
                        
showStatus(successMessageï¼Œ'success')ï¼›
                    }
                });
                
}catch(é”™è¯¯){
console.error('å¤„ç†é”™è¯¯ï¼š'ï¼Œè¯¯å·®)ï¼›
showStatus('å¤„ç†é”™è¯¯ï¼š'+error.messageï¼Œ'error')ï¼›
            }
        }

//ä»URLä¸­æå–Coså¯†é’¥
å‡½æ•°extractCosKey(url){
// ç§»é™¤å¯èƒ½çš„æŸ¥è¯¢å‚æ•°
Const cleanUrl=url.split('ï¼Ÿ')[0]ï¼›
// æå–åŸŸååçš„è·¯å¾„éƒ¨åˆ†
å¸¸æ•°è·¯å¾„=cleanUrl.split(config.targetDomain+'/')[1]ï¼›
è¿”å›è·¯å¾„ï¼›
        }

// æ˜¾ç¤ºçŠ¶æ€æ¶ˆæ¯
å‡½æ•°showStatus(æ¶ˆæ¯ï¼Œç±»å‹){
ConstatusElement=document.getElementById('StatusMessage')ï¼›
statusElement.innerHTML=æ¶ˆæ¯ï¼›
statusElement.style.display='block'ï¼›
            
// ç§»é™¤ä¹‹å‰çš„æ ·å¼ç±»
statusElement.classList.remove('success'ï¼Œ'error')ï¼›
            
// æ·»åŠ æ–°çš„æ ·å¼ç±»
if(type==='success'){
statusElement.classList.add('success')ï¼›
}else if(type==='error'){
statusElement.classList.add('error')ï¼›
            }
        }

// ç¤ºä¾‹ï¼šè‡ªåŠ¨å¡«å……æµ‹è¯•URLï¼ˆå¯é€‰ï¼‰
document.addEventListener('DOMContentLoaded'ï¼Œå‡½æ•°(){
// å¯ä»¥å–æ¶ˆæ³¨é‡Šä¸‹é¢çš„è¡Œæ¥è‡ªåŠ¨å¡«å……ä¸€ä¸ªç¤ºä¾‹URL
//document.getElementById('imageUrl').value='https://download.nature.qq.com/SnsShare/SocialProfile/5E71D72F5EFF3419C972328DBD36E568/175791409.jpg';
        });
</è„šæœ¬>
</èº«ä½“>
</è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€>
