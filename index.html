<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文件上传工具</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 20px; background-color: #f0f2f5; }
        .container { max-width: 100%; background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .header { text-align: center; margin-bottom: 20px; color: #8a2be2; }
        .tip-area { background-color: #8a2be2; color: white; padding: 15px; border-radius: 10px; margin-bottom: 20px; font-size: 14px; }
        .input-group { margin-bottom: 20px; }
        input[type="text"] { width: 100%; padding: 15px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; font-size: 16px; margin-top: 5px; }
        .btn { background-color: #8a2be2; color: white; padding: 16px; border: none; border-radius: 8px; cursor: pointer; width: 100%; font-size: 18px; font-weight: bold; }
        .btn:disabled { background-color: #aaa; }
        .result { margin-top: 20px; padding: 15px; border-radius: 8px; display: none; font-size: 14px; }
        .success { background-color: #e6f7e6; color: #2a8a2a; border: 1px solid #c3e6cb; }
        .error { background-color: #fde8e8; color: #d32f2f; border: 1px solid #f5c6cb; }
        a { color: #8a2be2; word-break: break-all; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h2>文件上传工具</h2>
            <p>版本 1.0</p>
        </div>

        <div class="tip-area">
            <h3>操作提示</h3>
            <ul>
                <li>在下方输入框中填入图片路径，例如: <code>SnsShare/SocialProfile/.../xxx.jpg</code></li>
                <li>本工具为功能演示版本。</li>
            </ul>
        </div>

        <div>
            <h4>请输入URL或COS路径：</h4>
            <div class="input-group">
                <input type="text" id="filePath" placeholder="例如: SnsShare/SocialProfile/F39566035AEEDC6A68EAEC36B350FF21/175815958.jpg">
            </div>

            <button class="btn" id="uploadBtn">开始上传</button>
        </div>

        <div id="resultArea" class="result"></div>
    </div>

    <script>
        // ！！！重要：将下面的URL替换成您第四步得到的真实URL ！！！
        const BACKEND_URL = "https://service-xxx-xxx.gz.apigw.tencentcs.com/release/file-uploader";

        document.getElementById('uploadBtn').addEventListener('click', async () => {
            const filePath = document.getElementById('filePath').value.trim();
            const button = document.getElementById('uploadBtn');
            const resultArea = document.getElementById('resultArea');

            resultArea.style.display = 'none';
            resultArea.className = 'result';
            button.disabled = true;
            button.textContent = '上传中...';

            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ filePath: filePath })
                });

                const data = await response.json();

                if (data.success) {
                    resultArea.innerHTML = `
                        <strong>${data.message}</strong>
                        <p><small>${data.note}</small></p>
                        <p><strong>游戏内相册链接:</strong><br><a href="${data.gameAlbumLink}" target="_blank">${data.gameAlbumLink}</a></p>
                        <p><strong>存储桶实时链接:</strong><br><a href="${data.bucketRealtimeLink}" target="_blank">${data.bucketRealtimeLink}</a></p>
                    `;
                    resultArea.classList.add('success');
                } else {
                    throw new Error(data.error);
                }
            } catch (error) {
                resultArea.innerHTML = `<strong>操作失败!</strong><p>${error.message}</p>`;
                resultArea.classList.add('error');
            } finally {
                resultArea.style.display = 'block';
                button.disabled = false;
                button.textContent = '开始上传';
            }
        });
    </script>
</body>
</html>
